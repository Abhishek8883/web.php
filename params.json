{"name":"web.php","body":"![web.php-logo](http://code.google.com/p/web-dot-php/logo)  \r\n**web.php** is a zero configuration web development library for PHP.\r\n\r\n## Hello World in web.php\r\n\r\n    <?php\r\n    include 'web.php';\r\n    get('/', function() {\r\n        die('Hello, World!');\r\n    });\r\n\r\n## Installation\r\n\r\nDownload `web.php` (for logging download `log.php`, and for password hashing download `password.php`).  \r\n\r\n### Modify .htaccess\r\n\r\n    <IfModule mod_rewrite.c>\r\n        RewriteCond %{REQUEST_FILENAME} !-f\r\n    \tRewriteRule ^ index.php [L]\r\n    </IfModule>\r\n\r\nIf you are using something other than `Apache` with `mod_rewrite`, Google for instructions.\r\n\r\n### Create `index.php` Bootstrap File\r\n\r\n    <?php\r\n    include 'web.php';\r\n    get('/', function() {\r\n        die('Hello, World!');\r\n    });\r\n    status('404');\r\n    die('404 Not Found');\r\n\r\n## Routing\r\n\r\n`web.php` has support for routing HTTP GET, POST, PUT, and DELETE request. Routes are case-insensitive, and the trailing `/` is omitted.\r\n\r\n### GET Routes\r\n\r\nUse `get($path, $func)` to route HTTP GET requests.\r\n\r\n#### Routes without Parameters (the Routes Work on Sub-Directories too):\r\n\r\n    <?php\r\n    get('/', function() {\r\n        die('Hello, World!');\r\n    });\r\n\r\nor:\r\n\r\n    <?php\r\n    get('/posts', function() {\r\n        die(json_encode(array(\r\n            array(\r\n                'id'    => 1,\r\n                'title' => 'Trying out web.php',\r\n                'body'  => 'Lorem...' \r\n            ),\r\n            array(\r\n                'id'    => 2,\r\n                'title' => 'I'm really starting to like web.php',\r\n                'body'  => 'Lorem...' \r\n            )\r\n        )));\r\n    });\r\n\r\n#### Parameterized Routes\r\n\r\nRoute parameters in `web.php` are parsed with `sscanf` and `vsprintf`, but we have added extra parameter `%p` which acts\r\nthe same as `%[^/]` (everything until or except `/`). Please read the documentation for the format from\r\n[sprintf's](http://www.php.net/manual/function.sprintf.php) documentation.\r\n\r\n    <?php\r\n    get('/posts/%d', function($id) {\r\n        switch ($id) {\r\n            case 1: die(json_encode(array(\r\n                    'id'    => 1,\r\n                    'title' => 'Trying out web.php',\r\n                    'body'  => 'Lorem...' \r\n                )));\r\n            case 2: die(json_encode(array(\r\n                    'id'    => 2,\r\n                    'title' => 'I'm really starting to like web.php',\r\n                    'body'  => 'Lorem...' \r\n                )));\r\n        }\r\n    }\r\n\r\n### POST Routes\r\n\r\nUse `post($path, $func)` to route HTTP POST requests. See the *GET Routes* examples.\r\n\r\n### PUT Routes\r\n\r\nUse `put($path, $func)` to route HTTP PUT requests. See the *GET Routes* examples.\r\n\r\n### DELETE Routes\r\n\r\nUse `delete($path, $func)` to route HTTP DELETE requests. See the *GET Routes* examples.\r\n\r\n### Routing All Types of Requests\r\n\r\nUse `route($path, $func)` to route all HTTP requests. See the *GET Routes* examples.\r\n\r\n## Forwards and Redirects\r\n\r\n### Forwards\r\n\r\nUse `forward($name, $func)` to register a named forward. Call a named forward with `forward($name)`.\r\nForwards need to be registered before using them.\r\n\r\n    <?php\r\n    forward('index', function() {\r\n        die('Index Page');\r\n    });\r\n    \r\n    get('/', function() {\r\n        forward('index')\r\n    });\r\n    \r\n    get('/another-url', function() {\r\n        forward('index')\r\n    });\r\n\r\n### Redirects\r\n\r\nUse `redirect($url, $code = 301, $die = true)` to redirect the user in other page.\r\n   \r\n    <?php\r\n    session_start();\r\n    get('/', function() {\r\n        die(isset($_SESSION['redirected']) ? 'Redirected' : 'Welcome!');\r\n    });\r\n\r\n    post('/', function() {\r\n        flash('redirected', true);\r\n        redirect('~/');\r\n    });\r\n\r\n## Views, Layouts, Blocks, Partials, and Pagelets\r\n\r\n`web.php` has support for views, and layouts (or even sub-layouts).\r\n\r\n### Views\r\n\r\n    <?php\r\n    get('/', function() {\r\n        die(new view('view.php'));\r\n    });\r\n\r\n*view.php:*\r\n\r\n    <!DOCTYPE html>\r\n    Hello World\r\n\r\n#### Views with Properties\r\n\r\n    <?php\r\n    get('/%s', function($text) {\r\n        $view = new view('view.php');\r\n        $view->text = htmlspecialchars($text);\r\n        die($view);\r\n    });\r\n\r\n*view.php:*\r\n\r\n    <!DOCTYPE html>\r\n    Hello, <?= $text ?>!\r\n\r\n#### Global View Variables\r\n\r\nYou can define global view variables that all the views will get with the following code:\r\n\r\n    <?php\r\n    view::$globals->title = 'web.php rocks!';\r\n\r\nNote: If local view variables are defined with same name as global variables, local variables overwrite the global ones.\r\nThe globals are still accessible from `view::$globals`.\r\n\r\n### Layouts\r\n\r\nYou can define the layout by setting the `layout` variable in a view, you can do it like this:\r\n\r\n    <?php\r\n    view::$globals->layout = 'layout.php';      // or\r\n    $view = new view('view.php', 'layout.php'); // or\r\n    $view = new view('view.php');\r\n    $view->layout = 'layout.php';               // or\r\n    $view = new view('view.php');               // see 'view.php'\r\n\r\n*view.php:*\r\n\r\n    <?php $layout = 'layout.php'; ?>\r\n    Hello, World!\r\n\r\n*layout.php:*\r\n\r\n    <!DOCTYPE html>\r\n    <html>\r\n        <body><?= $view ?></body>\r\n    </html>\r\n\r\nNote: All the view variables are also accessible from layouts.\r\n\r\n#### Nested Layouts\r\n\r\n*view.php:*\r\n\r\n    <?php $layout = 'section.php' ?>\r\n    <p>Hello World</p>\r\n\r\n*section.php:*\r\n\r\n    <?php $layout = 'master.php' ?>\r\n    <section>\r\n        <?= $view ?>\r\n    </section>\r\n\r\n*master.php:*\r\n\r\n    <!DOCTYPE html>\r\n    <html>\r\n        <body>\r\n            <?= $view ?>\r\n        </body>\r\n    </html>\r\n   \r\n### Blocks\r\n\r\nBlocks are a method to move particular block of 'text' from views to a particular location in layouts.\r\n\r\n*view.php:*\r\n\r\n    <?php\r\n    $layout = 'layout.php';\r\n    $title  = 'Blocks - web.php';\r\n    ?>\r\n    <?php block($head); ?>\r\n        <meta name=\"description\" content\"web.php has blocks too!\">\r\n    <?php block(); ?>\r\n    \r\n    Hello World!\r\n    \r\n    <?php block($aside); ?>\r\n        Hello Aside, too!\r\n    <?php block(); ?>\r\n\r\n    <?php block($scripts); ?>\r\n        <script src=\"jquery.min.js\"></script>\r\n    <?php block(); ?>\r\n\r\n*layout.php:*\r\n\r\n    <!DOCTYPE html>\r\n    <html>\r\n        <head>\r\n            <title>\r\n                <?= isset($title) ? $title : 'Default Title' ?>\r\n            </title>\r\n            <?= isset($head) ? $head : '' ?>\r\n        </head>\r\n        <body>\r\n            <article>\r\n                <?= $view ?>\r\n            </article>\r\n            <?php if (isset($aside)): ?>\r\n            <aside>\r\n                <?= $aside ?>\r\n            </aside>\r\n            <?php endif; ?>\r\n            <?= isset($scripts) ? $scripts : '' ?>\r\n        </body>\r\n    </html>\r\n\r\n### Partials\r\n\r\nTBD\r\n\r\n### Pagelets\r\n\r\nTBD (see: [Facebook's BigPipe](https://www.facebook.com/note.php?note_id=389414033919)).\r\n\r\n## Filters and Forms (including validation)\r\n\r\n### Filtering and Validating Variables\r\n\r\nUse `filter()` to filter a variable:\r\n\r\n    <?php\r\n    $email = 'root@sunet.se';\r\n    echo filter($email, 'email') ? 'Valid Email' : 'Invalid Email';\r\n\r\n#### Built-in Filters and Validators\r\n\r\nweb.php has these built-in validators available that come with PHP's [Filter Funtions](http://www.php.net/manual/ref.filter.php):\r\n\r\n    'bool', 'int', 'float', 'ip', 'ipv4', 'ipv6', 'email', and 'url'\r\n\r\nIn addition to that you can validate using regular expressions:\r\n\r\n    <?php\r\n    $email = 'john@doe.net';\r\n    echo filter($email, '/^.+@.+$/')\r\n        ? 'Valid Email'\r\n        : 'Invalid Email'; // Outputs 'Valid Email'\r\n\r\nBut that is not all, web.php comes with these functions to aid in validation:\r\n\r\n* `not($filter)`\r\n* `equal($exact, $strict = true)`\r\n* `length($min, $max = null, $charset = 'UTF-8')`\r\n* `minlength($min, $charset = 'UTF-8')`\r\n* `maxlength($max, $charset = 'UTF-8')`\r\n* `between($min, $max)`\r\n* `minvalue($min)`\r\n* `maxvalue($max)`\r\n* `choice()`\r\n\r\nExample:\r\n\r\n    <?php\r\n    $email = 'john@doe.net';\r\n    echo filter(\r\n        $email,\r\n        'email',\r\n        choice('john@doe.net', 'john@doe.com')\r\n    ) ? 'Valid Email' : 'Invalid Email'; // Outputs 'Valid Email'\r\n    \r\n    $age_o = '16';\r\n    $age_f = filter(\r\n        $age_o,\r\n        'int',\r\n        'intval',\r\n        not(between(0, 18))\r\n    );\r\n    echo $age_f !== false\r\n        ? 'Under-aged: {$age_o}'\r\n        : \"Over-aged: {$age_f}\"; // Outputs 'Under-aged: 16'\r\n\r\nNote: you can use multiple filters with single filter call.\r\n\r\n#### User Defined Filters and Validators\r\n\r\nFilters can either modify the `$value` or validate the `$value`. If validation filter fails, the filter function will\r\nreturn false immediately.\r\n\r\nThe most simple modifying filter:\r\n\r\n    <?php\r\n    function world_filter($value) {\r\n        return \"{$value} World!\";\r\n    }\r\n    // Outputs 'Hello World!'\r\n    echo filter('Hello', 'world_filter');\r\n    // Outputs 'HELLO WORLD!'\r\n    echo filter('Hello', 'world_filter', 'strtoupper');\r\n\r\nThe most simple validating filters:\r\n\r\n    <?php\r\n    function true_validator($value) {\r\n        return true;\r\n    }\r\n    function false_validator($value) {\r\n        return false;\r\n    }\r\n    // $valid holds true\r\n    $valid = filter('Hello', 'true_validator');\r\n    // $valid holds false\r\n    $valid = filter('Hello', 'true_validator', 'false_validator');\r\n\r\nYou can also mix modifying filters and validating filters:\r\n\r\n    <?php\r\n    $value = filter('1', 'int', 'intval'); // $value holds int(1)\r\n    $value = filter('A', 'int', 'intval'); // $value holds bool(false)\r\n\r\nSometimes you need to write parameterized filters:\r\n\r\n    <?php\r\n    function lessthan($number) {\r\n        return function($value) use ($number) {\r\n            return $value < $number;\r\n        };    \r\n    }\r\n    \r\n    $num = '5';\r\n    echo filter($num, 'int', 'intval', lessthan(6))\r\n        ? \"{$num} is less than 6\"\r\n        : \"{$num} is not less than 6\";\r\n\r\nNote: You can also have your filter functions namespaced.\r\n\r\n### Forms Filtering and Validation\r\n\r\nTBD\r\n\r\n## Other Features\r\n### Sending Files\r\n#### X-Sendfile Support\r\n### Logging with `log.php`\r\n#### Logging with ChromePHP\r\n#### Extending the Logger\r\n### Password Hashing & Checking with `password.php`\r\n\r\n## FAQ\r\n\r\n#### Is routing to anonymous function the only option?\r\n\r\nYou can actually route to `files`, `functions`, `static class methods`, and `object instance methods`:\r\n\r\n    // Look for $args[0] inside router.php\r\n    get('/%d', 'router.php');\r\n    // URL: /hello will output 'hello' with a built-in function 'die'\r\n    get('/%p', 'die');\r\n    // Executes a static method\r\n    get('/', 'Clazz::staticMethod');\r\n    // Instantiates new object from class 'Clazz' using\r\n    // parameterless constructor\r\n    get('/', 'Clazz->instanceMethod');\r\n\r\n#### Why are you using 'die' inside controllers? How can I execute code after executing route, i.e. cleanup resources?\r\n\r\nThis design decision is probably something that people may or may not agree. We think that it is user's responsibility to\r\nmanage the execution. You don't have to `die`, but keep in mind that any other route that is executed after the matching\r\none will also be executed if it matches the url. That's why it's common to `die` with web.php.\r\n\r\nIf you want to run cleanup code, please try to build your code so that cleanup routines can be registered with\r\n`register_shutdown_function`.\r\n\r\n#### How fast is web.php?\r\n\r\nIt depends on what you compare it to. But if you compare it to other PHP frameworks, web.php will surely stand the\r\ncompetition. If you know how web.php could be made faster, please let us know it too!\r\n\r\n#### What is the philosophy behind web.php?\r\n\r\nIf there is any, this comes to close:\r\n\r\n> Perfection is achieved, not when there is nothing more to add, but when there is nothing left to take away.  \r\n--  *Antoine de Saint-Exupéry*\r\n\r\nweb.php is trying to follow the principles of [Unix philosophy](http://en.wikipedia.org/wiki/Unix_philosophy).\r\n\r\n#### web.php doesn't provide object relational mapper (ORM), what do you suggest?\r\n\r\nYou could try these:\r\n\r\n* [RedBeanPHP](http://redbeanphp.com/)\r\n* [Doctrine](http://www.doctrine-project.org/)\r\n\r\nYou could also try out NoSQL DBs like:\r\n\r\n* [Redis](http://redis.io/)\r\n* [MongoDB](http://www.mongodb.org/)\r\n\r\n#### How do I run the tests?\r\n\r\n    cd tests\r\n    pear run-tests\r\n\r\n#### PHP Sucks! Where to go next?\r\n\r\nTry these:\r\n\r\n* Perl: [Mojolicious](http://mojolicio.us/)\r\n* Ruby: [Sinatra](http://www.sinatrarb.com/)\r\n* Python: [web.py](http://webpy.org/)\r\n* Javascript: [Node.js](http://nodejs.org/) + [Express](http://expressjs.com/)\r\n\r\n#### I see that you are using `goto` inside view class' `__toString`. Isn't `goto` considered harmful?\r\n\r\nFeel free to make a fork and change it to `while (true) { ... }` or `do { ... } while (true);` or `for(;;) { ... }`.\r\n\r\n## License\r\n\r\nweb.php is distributed with MIT License.\r\n\r\n    web.php\r\n    Copyright (c) 2012 Aapo Talvensaari\r\n    \r\n    Permission is hereby granted, free of charge, to any person\r\n    obtaining a copy of this software and associated documentation\r\n    files (the \"Software\"), to deal in the Software without\r\n    restriction, including without limitation the rights to use,\r\n    copy, modify, merge, publish, distribute, sublicense, and/or\r\n    sell copies of the Software, and to permit persons to whom\r\n    the Software is furnished to do so, subject to the following\r\n    conditions:\r\n    \r\n    The above copyright notice and this permission notice shall\r\n    be included in all copies or substantial portions of the\r\n    Software.\r\n    \r\n    THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY\r\n    KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE\r\n    WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR\r\n    PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS\r\n    OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR\r\n    OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\r\n    OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\r\n    SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.","tagline":"web.php is a zero configuration web development library for PHP.","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}